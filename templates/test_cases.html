{% extends 'base.html' %}{% block content %}<div class="container-fluid">    <div class="d-flex justify-content-between align-items-center mb-4">        <div>            <h1 class="h2">Test Cases</h1>            <p class="text-muted mb-0">Total: {{ total_test_cases }} test cases created</p>        </div>        <div>            <button class="btn btn-primary" onclick="location.href='{{ url_for('ai_agent_automation') }}';">                <i class="fas fa-robot me-1"></i> Generate Test Cases            </button>        </div>    </div>        <div class="row mb-4">        <div class="col-md-3">            <div class="card border-0 shadow-sm">                <div class="card-header bg-white">                    <h5 class="mb-0">Filter</h5>                </div>                <div class="card-body">                    <div class="mb-3">                        <label class="form-label">Status</label>                        <div class="form-check">                            <input class="form-check-input" type="checkbox" value="" id="pendingCheck" checked>                            <label class="form-check-label" for="pendingCheck">                                Pending                            </label>                        </div>                        <div class="form-check">                            <input class="form-check-input" type="checkbox" value="" id="runningCheck" checked>                            <label class="form-check-label" for="runningCheck">                                Running                            </label>                        </div>                        <div class="form-check">                            <input class="form-check-input" type="checkbox" value="" id="completedCheck" checked>                            <label class="form-check-label" for="completedCheck">                                Completed                            </label>                        </div>                        <div class="form-check">                            <input class="form-check-input" type="checkbox" value="" id="failedCheck" checked>                            <label class="form-check-label" for="failedCheck">                                Failed                            </label>                        </div>                    </div>                                        <div>                        <label class="form-label">Type</label>                        <div class="form-check">                            <input class="form-check-input" type="checkbox" value="" id="sqlInjectionCheck" checked>                            <label class="form-check-label" for="sqlInjectionCheck">                                SQL Injection                            </label>                        </div>                        <div class="form-check">                            <input class="form-check-input" type="checkbox" value="" id="xssCheck" checked>                            <label class="form-check-label" for="xssCheck">                                XSS                            </label>                        </div>                        <div class="form-check">                            <input class="form-check-input" type="checkbox" value="" id="csrfCheck" checked>                            <label class="form-check-label" for="csrfCheck">                                CSRF                            </label>                        </div>                        <div class="form-check">                            <input class="form-check-input" type="checkbox" value="" id="otherCheck" checked>                            <label class="form-check-label" for="otherCheck">                                Other                            </label>                        </div>                    </div>                </div>            </div>        </div>                <div class="col-md-9">            <div class="card border-0 shadow-sm">                <div class="card-header bg-white d-flex justify-content-between align-items-center">                    <h5 class="mb-0">Test Cases</h5>                    <div class="form-check form-switch">                        <input class="form-check-input" type="checkbox" id="aiGeneratedOnly">                        <label class="form-check-label" for="aiGeneratedOnly">AI Generated Only</label>                    </div>                </div>                <div class="card-body p-0">                    <div class="table-responsive">                        <table class="table table-hover mb-0">                            <thead>                                <tr>                                    <th>ID</th>                                    <th>Name</th>                                    <th>Type</th>                                    <th>Target</th>                                    <th>Status</th>                                    <th>Created</th>                                    <th>Source</th>                                    <th>Actions</th>                                </tr>                            </thead>                            <tbody>                                {% for test_case in test_cases[:4] %}                                <tr class="test-case-row {% if 'AI' in test_case.name or test_case.name.startswith('SHIELD') %}ai-generated{% endif %}"                                     data-status="{{ test_case.status }}"                                     data-type="{{ test_case.type|lower }}">                                    <td>{{ test_case.id }}</td>                                    <td>                                        <a href="{{ url_for('test_case_detail', test_case_id=test_case.id) }}" class="text-decoration-none">                                            {{ test_case.name }}                                        </a>                                    </td>                                    <td>{{ test_case.type }}</td>                                    <td>                                        <span class="text-truncate d-inline-block" style="max-width: 200px;" title="{{ test_case.target }}">                                            {{ test_case.target }}                                        </span>                                    </td>                                    <td>                                        <span class="badge bg-{% if test_case.status == 'completed' %}success{% elif test_case.status == 'failed' %}danger{% elif test_case.status == 'running' %}warning{% else %}secondary{% endif %}">                                            {{ test_case.status }}                                        </span>                                    </td>                                    <td>{{ test_case.created_at }}</td>                                    <td>                                        {% if 'AI' in test_case.name or test_case.name.startswith('SHIELD') %}                                        <span class="badge bg-info text-dark">                                            <i class="fas fa-robot me-1"></i> AI                                        </span>                                        {% else %}                                        <span class="badge bg-light text-dark">                                            <i class="fas fa-user me-1"></i> Manual                                        </span>                                        {% endif %}                                    </td>                                    <td>                                        <div class="btn-group btn-group-sm">                                            <a href="{{ url_for('test_case_detail', test_case_id=test_case.id) }}" class="btn btn-outline-primary">View</a>                                            {% if test_case.status == 'pending' %}                                            <button class="btn btn-outline-success run-test-btn" data-test-id="{{ test_case.id }}">Run</button>                                            {% endif %}                                        </div>                                    </td>                                </tr>                                {% else %}                                <tr>                                    <td colspan="8" class="text-center py-4">                                        <p class="text-muted mb-0">No test cases found</p>                                        <small class="d-block mt-2">                                            <a href="{{ url_for('ai_agent_automation') }}" class="text-decoration-none">                                                <i class="fas fa-robot me-1"></i> Generate test cases with AI                                            </a>                                        </small>                                    </td>                                </tr>                                {% endfor %}                                                                {% if test_cases|length > 4 %}                                <tr>                                    <td colspan="8" class="text-center py-3 bg-light">                                        <a href="{{ url_for('test_cases') }}" class="text-decoration-none">                                            <i class="fas fa-ellipsis-h me-1"></i> {{ test_cases|length - 4 }} more test cases available                                        </a>                                    </td>                                </tr>                                {% endif %}                            </tbody>                        </table>                    </div>                </div>            </div>        </div>    </div></div><script>document.addEventListener('DOMContentLoaded', function() {    // Status filter implementation    const pendingCheck = document.getElementById('pendingCheck');    const runningCheck = document.getElementById('runningCheck');    const completedCheck = document.getElementById('completedCheck');    const failedCheck = document.getElementById('failedCheck');        // Type filter implementation    const sqlInjectionCheck = document.getElementById('sqlInjectionCheck');    const xssCheck = document.getElementById('xssCheck');    const csrfCheck = document.getElementById('csrfCheck');    const otherCheck = document.getElementById('otherCheck');        // AI Generated filter    const aiGeneratedOnly = document.getElementById('aiGeneratedOnly');        // All test case rows    const testCaseRows = document.querySelectorAll('.test-case-row');        function applyFilters() {        testCaseRows.forEach(row => {            // Get row data attributes            const status = row.dataset.status;            const type = row.dataset.type;            const isAiGenerated = row.classList.contains('ai-generated');                        // Check if row should be visible based on status filters            const statusVisible =                 (status === 'pending' && pendingCheck.checked) ||                (status === 'running' && runningCheck.checked) ||                (status === 'completed' && completedCheck.checked) ||                (status === 'failed' && failedCheck.checked);                        // Check if row should be visible based on type filters            const typeVisible =                 (type.includes('sql injection') && sqlInjectionCheck.checked) ||                (type.includes('xss') && xssCheck.checked) ||                (type.includes('csrf') && csrfCheck.checked) ||                (!type.includes('sql injection') && !type.includes('xss') && !type.includes('csrf') && otherCheck.checked);                        // Check if row should be visible based on AI generated filter            const aiVisible = !aiGeneratedOnly.checked || isAiGenerated;                        // Set row visibility            row.style.display = statusVisible && typeVisible && aiVisible ? '' : 'none';        });    }        // Add event listeners to all filter checkboxes    [pendingCheck, runningCheck, completedCheck, failedCheck,      sqlInjectionCheck, xssCheck, csrfCheck, otherCheck, aiGeneratedOnly].forEach(checkbox => {        checkbox.addEventListener('change', applyFilters);    });        // Add event listener for run test buttons    document.querySelectorAll('.run-test-btn').forEach(button => {        button.addEventListener('click', function() {            const testId = this.getAttribute('data-test-id');            this.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>';            this.disabled = true;                        // Here we would make an AJAX call to run the test            // For now, just redirect to the detail page after a short delay            setTimeout(function() {                window.location.href = '{{ url_for('test_case_detail', test_case_id=0) }}'.replace('0', testId);            }, 1500);        });    });});</script>{% endblock %} 